                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.2.0 #13081 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module psg
                                      6 	.optsdcc -mz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _g_PSG_VolumeBackup
                                     12 	.globl _g_PSG_Regs
                                     13 	.globl _PSG_SetRegister
                                     14 	.globl _PSG_GetRegister
                                     15 	.globl _PSG_SetTone
                                     16 	.globl _PSG_SetNoise
                                     17 	.globl _PSG_SetMixer
                                     18 	.globl _PSG_SetVolume
                                     19 	.globl _PSG_SetEnvelope
                                     20 	.globl _PSG_SetShape
                                     21 	.globl _PSG_EnableTone
                                     22 	.globl _PSG_EnableNoise
                                     23 	.globl _PSG_EnableEnvelope
                                     24 	.globl _PSG_Mute
                                     25 	.globl _PSG_Resume
                                     26 	.globl _PSG_Apply
                                     27 ;--------------------------------------------------------
                                     28 ; special function registers
                                     29 ;--------------------------------------------------------
                         000000A8    30 _g_PortPrimarySlot	=	0x00a8
                         000000A9    31 _g_PortReadKeyboard	=	0x00a9
                         000000AA    32 _g_PortAccessKeyboard	=	0x00aa
                         000000AB    33 _g_PortControl	=	0x00ab
                         00000098    34 _g_VDP_DataPort	=	0x0098
                         00000099    35 _g_VDP_RegPort	=	0x0099
                         00000099    36 _g_VDP_AddrPort	=	0x0099
                         00000099    37 _g_VDP_StatPort	=	0x0099
                         0000009A    38 _g_VDP_PalPort	=	0x009a
                         0000009B    39 _g_VDP_IRegPort	=	0x009b
                         000000A0    40 _g_PSG_RegPort	=	0x00a0
                         000000A1    41 _g_PSG_DataPort	=	0x00a1
                         000000A2    42 _g_PSG_StatPort	=	0x00a2
                         00000010    43 _g_PSG_Ext_RegPort	=	0x0010
                         00000011    44 _g_PSG_Ext_DataPort	=	0x0011
                         00000012    45 _g_PSG_Ext_StatPort	=	0x0012
                         0000007C    46 _g_MSXMusic_IndexPort	=	0x007c
                         0000007D    47 _g_MSXMusic_DataPort	=	0x007d
                         000000C0    48 _g_MSXAudio_IndexPort	=	0x00c0
                         000000C1    49 _g_MSXAudio_DataPort	=	0x00c1
                         000000C2    50 _g_MSXAudio_IndexPort2	=	0x00c2
                         000000C3    51 _g_MSXAudio_DataPort2	=	0x00c3
                         000000B4    52 _g_RTC_AddrPort	=	0x00b4
                         000000B5    53 _g_RTC_DataPort	=	0x00b5
                                     54 ;--------------------------------------------------------
                                     55 ; ram data
                                     56 ;--------------------------------------------------------
                                     57 	.area _DATA
    00000000                         58 _g_PSG_Regs::
    00000000                         59 	.ds 16
    00000010                         60 _g_PSG_VolumeBackup::
    00000010                         61 	.ds 3
                                     62 ;--------------------------------------------------------
                                     63 ; ram data
                                     64 ;--------------------------------------------------------
                                     65 	.area _INITIALIZED
                                     66 ;--------------------------------------------------------
                                     67 ; absolute external ram data
                                     68 ;--------------------------------------------------------
                                     69 	.area _DABS (ABS)
                                     70 ;--------------------------------------------------------
                                     71 ; global & static initialisations
                                     72 ;--------------------------------------------------------
                                     73 	.area _HOME
                                     74 	.area _GSINIT
                                     75 	.area _GSFINAL
                                     76 	.area _GSINIT
                                     77 ;--------------------------------------------------------
                                     78 ; Home
                                     79 ;--------------------------------------------------------
                                     80 	.area _HOME
                                     81 	.area _HOME
                                     82 ;--------------------------------------------------------
                                     83 ; code
                                     84 ;--------------------------------------------------------
                                     85 	.area _CODE
                                     86 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:60: void PSG_SetRegister(u8 reg, u8 value)
                                     87 ;	---------------------------------
                                     88 ; Function PSG_SetRegister
                                     89 ; ---------------------------------
    00000000                         90 _PSG_SetRegister::
    00000000 5F               [ 4]   91 	ld	e, a
    00000001 4D               [ 4]   92 	ld	c, l
                                     93 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:64: u8* ptr = (u8*)g_PSG_Regs;
    00000002 21r00r00         [10]   94 	ld	hl, #_g_PSG_Regs+0
                                     95 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:65: ptr += reg;
    00000005 16 00            [ 7]   96 	ld	d, #0x00
    00000007 19               [11]   97 	add	hl, de
                                     98 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:66: *ptr = value;
    00000008 71               [ 7]   99 	ld	(hl), c
                                    100 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:74: }
    00000009 C9               [10]  101 	ret
                                    102 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:78: u8 PSG_GetRegister(u8 reg)
                                    103 ;	---------------------------------
                                    104 ; Function PSG_GetRegister
                                    105 ; ---------------------------------
    0000000A                        106 _PSG_GetRegister::
    0000000A 5F               [ 4]  107 	ld	e, a
                                    108 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:82: u8* ptr = (u8*)g_PSG_Regs;
    0000000B 21r00r00         [10]  109 	ld	hl, #_g_PSG_Regs+0
                                    110 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:83: ptr += reg;
    0000000E 16 00            [ 7]  111 	ld	d, #0x00
    00000010 19               [11]  112 	add	hl, de
                                    113 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:84: return *ptr;
    00000011 7E               [ 7]  114 	ld	a, (hl)
                                    115 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:92: }
    00000012 C9               [10]  116 	ret
                                    117 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:98: void PSG_SetTone(u8 chan, u16 period)
                                    118 ;	---------------------------------
                                    119 ; Function PSG_SetTone
                                    120 ; ---------------------------------
    00000013                        121 _PSG_SetTone::
    00000013 4F               [ 4]  122 	ld	c, a
                                    123 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:102: u8* ptr = (u8*)g_PSG_Regs;
    00000014 21r00r00         [10]  124 	ld	hl, #_g_PSG_Regs+0
                                    125 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:103: ptr += (chan * 2);
    00000017 06 00            [ 7]  126 	ld	b, #0x00
    00000019 CB 21            [ 8]  127 	sla	c
    0000001B CB 10            [ 8]  128 	rl	b
    0000001D 09               [11]  129 	add	hl, bc
                                    130 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:104: *ptr = (u8)period;
    0000001E 73               [ 7]  131 	ld	(hl), e
                                    132 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:105: *++ptr = (u8)(period >> 8);
    0000001F 23               [ 6]  133 	inc	hl
    00000020 72               [ 7]  134 	ld	(hl), d
                                    135 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:116: }
    00000021 C9               [10]  136 	ret
                                    137 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:120: void PSG_SetNoise(u8 period)
                                    138 ;	---------------------------------
                                    139 ; Function PSG_SetNoise
                                    140 ; ---------------------------------
    00000022                        141 _PSG_SetNoise::
    00000022 4F               [ 4]  142 	ld	c, a
                                    143 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:124: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_NOISE;
    00000023 11r00r00         [10]  144 	ld	de, #_g_PSG_Regs+0
    00000026 21 06 00         [10]  145 	ld	hl, #0x0006
    00000029 19               [11]  146 	add	hl, de
                                    147 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:125: *ptr = period;
    0000002A 71               [ 7]  148 	ld	(hl), c
                                    149 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:133: }
    0000002B C9               [10]  150 	ret
                                    151 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:137: void PSG_SetMixer(u8 mix)
                                    152 ;	---------------------------------
                                    153 ; Function PSG_SetMixer
                                    154 ; ---------------------------------
    0000002C                        155 _PSG_SetMixer::
    0000002C 4F               [ 4]  156 	ld	c, a
                                    157 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:141: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_MIXER;
    0000002D 11r00r00         [10]  158 	ld	de, #_g_PSG_Regs+0
    00000030 21 07 00         [10]  159 	ld	hl, #0x0007
    00000033 19               [11]  160 	add	hl, de
                                    161 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:142: *ptr = ~mix; // with PSG_INDIRECT bit #6 & #7 are handled in PSG_Apply() function
    00000034 79               [ 4]  162 	ld	a, c
    00000035 2F               [ 4]  163 	cpl
    00000036 77               [ 7]  164 	ld	(hl), a
                                    165 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:150: }
    00000037 C9               [10]  166 	ret
                                    167 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:154: void PSG_SetVolume(u8 chan, u8 vol)
                                    168 ;	---------------------------------
                                    169 ; Function PSG_SetVolume
                                    170 ; ---------------------------------
    00000038                        171 _PSG_SetVolume::
    00000038 47               [ 4]  172 	ld	b, a
    00000039 4D               [ 4]  173 	ld	c, l
                                    174 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:158: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_AMP_A;
    0000003A 11r00r00         [10]  175 	ld	de, #_g_PSG_Regs+0
    0000003D 21 08 00         [10]  176 	ld	hl, #0x0008
    00000040 19               [11]  177 	add	hl, de
                                    178 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:159: ptr += chan;
    00000041 58               [ 4]  179 	ld	e, b
    00000042 16 00            [ 7]  180 	ld	d, #0x00
    00000044 19               [11]  181 	add	hl, de
                                    182 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:160: *ptr = vol;
    00000045 71               [ 7]  183 	ld	(hl), c
                                    184 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:168: }
    00000046 C9               [10]  185 	ret
                                    186 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:172: void PSG_SetEnvelope(u16 period)
                                    187 ;	---------------------------------
                                    188 ; Function PSG_SetEnvelope
                                    189 ; ---------------------------------
    00000047                        190 _PSG_SetEnvelope::
    00000047 EB               [ 4]  191 	ex	de, hl
                                    192 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:176: g_PSG_Regs.Envelope = period;
    00000048 ED 53r0Br00      [20]  193 	ld	((_g_PSG_Regs + 11)), de
                                    194 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:187: }
    0000004C C9               [10]  195 	ret
                                    196 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:191: void PSG_SetShape(u8 shape)
                                    197 ;	---------------------------------
                                    198 ; Function PSG_SetShape
                                    199 ; ---------------------------------
    0000004D                        200 _PSG_SetShape::
    0000004D 4F               [ 4]  201 	ld	c, a
                                    202 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:195: g_PSG_Regs.Shape = shape;
    0000004E 21r0Dr00         [10]  203 	ld	hl, #(_g_PSG_Regs + 13)
    00000051 71               [ 7]  204 	ld	(hl), c
                                    205 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:203: }
    00000052 C9               [10]  206 	ret
                                    207 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:207: void PSG_EnableTone(u8 chan, bool val)
                                    208 ;	---------------------------------
                                    209 ; Function PSG_EnableTone
                                    210 ; ---------------------------------
    00000053                        211 _PSG_EnableTone::
    00000053 5F               [ 4]  212 	ld	e, a
    00000054 4D               [ 4]  213 	ld	c, l
                                    214 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:210: u8 mix = g_PSG_Regs.Mixer;
    00000055 21r07r00         [10]  215 	ld	hl, #_g_PSG_Regs+7
    00000058 56               [ 7]  216 	ld	d, (hl)
                                    217 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:216: u8 bit = 1 << chan;
    00000059 43               [ 4]  218 	ld	b, e
    0000005A 1E 01            [ 7]  219 	ld	e, #0x01
    0000005C 04               [ 4]  220 	inc	b
    0000005D C3r62r00         [10]  221 	jp	00111$
    00000060                        222 00110$:
    00000060 CB 23            [ 8]  223 	sla	e
    00000062                        224 00111$:
    00000062 10 FC            [13]  225 	djnz	00110$
                                    226 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:217: mix &= ~bit;
    00000064 7B               [ 4]  227 	ld	a, e
    00000065 2F               [ 4]  228 	cpl
    00000066 A2               [ 4]  229 	and	a, d
                                    230 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:219: if(val == 0)
    00000067 0C               [ 4]  231 	inc	c
    00000068 0D               [ 4]  232 	dec	c
    00000069 20 01            [12]  233 	jr	NZ, 00102$
                                    234 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:220: mix |= bit;
    0000006B B3               [ 4]  235 	or	a, e
    0000006C                        236 00102$:
                                    237 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:223: g_PSG_Regs.Mixer = mix;
    0000006C 77               [ 7]  238 	ld	(hl), a
                                    239 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:227: }
    0000006D C9               [10]  240 	ret
                                    241 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:231: void PSG_EnableNoise(u8 chan, bool val)
                                    242 ;	---------------------------------
                                    243 ; Function PSG_EnableNoise
                                    244 ; ---------------------------------
    0000006E                        245 _PSG_EnableNoise::
    0000006E 5F               [ 4]  246 	ld	e, a
    0000006F 4D               [ 4]  247 	ld	c, l
                                    248 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:234: u8 mix = g_PSG_Regs.Mixer;
    00000070 21r07r00         [10]  249 	ld	hl, #_g_PSG_Regs+7
    00000073 56               [ 7]  250 	ld	d, (hl)
                                    251 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:240: u8 bit = 8 << chan;
    00000074 43               [ 4]  252 	ld	b, e
    00000075 1E 08            [ 7]  253 	ld	e, #0x08
    00000077 04               [ 4]  254 	inc	b
    00000078 C3r7Dr00         [10]  255 	jp	00111$
    0000007B                        256 00110$:
    0000007B CB 23            [ 8]  257 	sla	e
    0000007D                        258 00111$:
    0000007D 10 FC            [13]  259 	djnz	00110$
                                    260 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:241: mix &= ~bit;
    0000007F 7B               [ 4]  261 	ld	a, e
    00000080 2F               [ 4]  262 	cpl
    00000081 A2               [ 4]  263 	and	a, d
                                    264 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:243: if(val == 0)
    00000082 0C               [ 4]  265 	inc	c
    00000083 0D               [ 4]  266 	dec	c
    00000084 20 01            [12]  267 	jr	NZ, 00102$
                                    268 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:244: mix |= bit;
    00000086 B3               [ 4]  269 	or	a, e
    00000087                        270 00102$:
                                    271 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:247: g_PSG_Regs.Mixer = mix;
    00000087 77               [ 7]  272 	ld	(hl), a
                                    273 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:251: }
    00000088 C9               [10]  274 	ret
                                    275 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:255: void PSG_EnableEnvelope(u8 chan, bool val)
                                    276 ;	---------------------------------
                                    277 ; Function PSG_EnableEnvelope
                                    278 ; ---------------------------------
    00000089                        279 _PSG_EnableEnvelope::
    00000089 5F               [ 4]  280 	ld	e, a
    0000008A 45               [ 4]  281 	ld	b, l
                                    282 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:258: u8 vol = g_PSG_Regs.Volume[chan];
    0000008B 21r08r00         [10]  283 	ld	hl, #_g_PSG_Regs+8
    0000008E 16 00            [ 7]  284 	ld	d, #0x00
    00000090 19               [11]  285 	add	hl, de
    00000091 7E               [ 7]  286 	ld	a, (hl)
                                    287 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:264: vol &= 0x0F;
    00000092 E6 0F            [ 7]  288 	and	a, #0x0f
    00000094 4F               [ 4]  289 	ld	c, a
                                    290 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:266: if(val != 0)
    00000095 78               [ 4]  291 	ld	a, b
    00000096 B7               [ 4]  292 	or	a, a
    00000097 28 02            [12]  293 	jr	Z, 00102$
                                    294 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:267: vol |= PSG_F_ENV;
    00000099 CB E1            [ 8]  295 	set	4, c
    0000009B                        296 00102$:
                                    297 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:270: g_PSG_Regs.Volume[chan] = vol;
    0000009B 71               [ 7]  298 	ld	(hl), c
                                    299 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:274: }
    0000009C C9               [10]  300 	ret
                                    301 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:280: void PSG_Mute()
                                    302 ;	---------------------------------
                                    303 ; Function PSG_Mute
                                    304 ; ---------------------------------
    0000009D                        305 _PSG_Mute::
                                    306 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:284: loop(i, 3)
    0000009D 0E 00            [ 7]  307 	ld	c, #0x00
    0000009F                        308 00103$:
    0000009F 79               [ 4]  309 	ld	a, c
    000000A0 D6 03            [ 7]  310 	sub	a, #0x03
    000000A2 D0               [11]  311 	ret	NC
                                    312 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:287: g_PSG_VolumeBackup[i] = g_PSG_Regs.Volume[i];
    000000A3 21r10r00         [10]  313 	ld	hl, #_g_PSG_VolumeBackup
    000000A6 06 00            [ 7]  314 	ld	b, #0x00
    000000A8 09               [11]  315 	add	hl, bc
    000000A9 3Er08            [ 7]  316 	ld	a, #<((_g_PSG_Regs + 8))
    000000AB 81               [ 4]  317 	add	a, c
    000000AC 5F               [ 4]  318 	ld	e, a
    000000AD 3Es00            [ 7]  319 	ld	a, #>((_g_PSG_Regs + 8))
    000000AF CE 00            [ 7]  320 	adc	a, #0x00
    000000B1 57               [ 4]  321 	ld	d, a
    000000B2 1A               [ 7]  322 	ld	a, (de)
    000000B3 77               [ 7]  323 	ld	(hl), a
                                    324 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:289: g_PSG_Regs.Volume[i] = 0;
    000000B4 AF               [ 4]  325 	xor	a, a
    000000B5 12               [ 7]  326 	ld	(de), a
                                    327 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:284: loop(i, 3)
    000000B6 0C               [ 4]  328 	inc	c
                                    329 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:304: }
    000000B7 C3r9Fr00         [10]  330 	jp	00103$
                                    331 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:309: void PSG_Resume()
                                    332 ;	---------------------------------
                                    333 ; Function PSG_Resume
                                    334 ; ---------------------------------
    000000BA                        335 _PSG_Resume::
                                    336 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:313: loop(i, 3)
    000000BA 0E 00            [ 7]  337 	ld	c, #0x00
    000000BC                        338 00103$:
    000000BC 79               [ 4]  339 	ld	a, c
    000000BD D6 03            [ 7]  340 	sub	a, #0x03
    000000BF D0               [11]  341 	ret	NC
                                    342 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:315: g_PSG_Regs.Volume[i] = g_PSG_VolumeBackup[i];
    000000C0 3Er08            [ 7]  343 	ld	a, #<((_g_PSG_Regs + 8))
    000000C2 81               [ 4]  344 	add	a, c
    000000C3 5F               [ 4]  345 	ld	e, a
    000000C4 3Es00            [ 7]  346 	ld	a, #>((_g_PSG_Regs + 8))
    000000C6 CE 00            [ 7]  347 	adc	a, #0x00
    000000C8 57               [ 4]  348 	ld	d, a
    000000C9 21r10r00         [10]  349 	ld	hl, #_g_PSG_VolumeBackup
    000000CC 06 00            [ 7]  350 	ld	b, #0x00
    000000CE 09               [11]  351 	add	hl, bc
    000000CF 7E               [ 7]  352 	ld	a, (hl)
    000000D0 12               [ 7]  353 	ld	(de), a
                                    354 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:313: loop(i, 3)
    000000D1 0C               [ 4]  355 	inc	c
                                    356 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:327: }
    000000D2 C3rBCr00         [10]  357 	jp	00103$
                                    358 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:335: void PSG_Apply()
                                    359 ;	---------------------------------
                                    360 ; Function PSG_Apply
                                    361 ; ---------------------------------
    000000D5                        362 _PSG_Apply::
                                    363 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:402: __endasm;
    000000D5 3Ar07r00         [13]  364 	ld	A, (#_g_PSG_Regs + 7)
    000000D8 E6 3F            [ 7]  365 	and	#0b00111111
    000000DA 47               [ 4]  366 	ld	B, A
    000000DB 3E 07            [ 7]  367 	ld	A, #7
    000000DD D3 A0            [11]  368 	out	(#0xA0), A
    000000DF DB A2            [11]  369 	in	A, (#0xA2)
    000000E1 E6 C0            [ 7]  370 	and	#0b11000000
    000000E3 B0               [ 4]  371 	or	B
    000000E4 32r07r00         [13]  372 	ld	(#_g_PSG_Regs + 7), A
    000000E7 21r00r00         [10]  373 	ld	HL, #_g_PSG_Regs
    000000EA 0E A1            [ 7]  374 	ld	C, #0xA1
    000000EC AF               [ 4]  375 	xor	A
                                    376 	.rept	13
                                    377 	out	(0xA0), A
                                    378 	outi
                                    379 	inc	A
                                    380 	.endm
    000000ED D3 A0            [11]    1 	out	(0xA0), A
    000000EF ED A3            [16]    2 	outi
    000000F1 3C               [ 4]    3 	inc	A
    000000F2 D3 A0            [11]    1 	out	(0xA0), A
    000000F4 ED A3            [16]    2 	outi
    000000F6 3C               [ 4]    3 	inc	A
    000000F7 D3 A0            [11]    1 	out	(0xA0), A
    000000F9 ED A3            [16]    2 	outi
    000000FB 3C               [ 4]    3 	inc	A
    000000FC D3 A0            [11]    1 	out	(0xA0), A
    000000FE ED A3            [16]    2 	outi
    00000100 3C               [ 4]    3 	inc	A
    00000101 D3 A0            [11]    1 	out	(0xA0), A
    00000103 ED A3            [16]    2 	outi
    00000105 3C               [ 4]    3 	inc	A
    00000106 D3 A0            [11]    1 	out	(0xA0), A
    00000108 ED A3            [16]    2 	outi
    0000010A 3C               [ 4]    3 	inc	A
    0000010B D3 A0            [11]    1 	out	(0xA0), A
    0000010D ED A3            [16]    2 	outi
    0000010F 3C               [ 4]    3 	inc	A
    00000110 D3 A0            [11]    1 	out	(0xA0), A
    00000112 ED A3            [16]    2 	outi
    00000114 3C               [ 4]    3 	inc	A
    00000115 D3 A0            [11]    1 	out	(0xA0), A
    00000117 ED A3            [16]    2 	outi
    00000119 3C               [ 4]    3 	inc	A
    0000011A D3 A0            [11]    1 	out	(0xA0), A
    0000011C ED A3            [16]    2 	outi
    0000011E 3C               [ 4]    3 	inc	A
    0000011F D3 A0            [11]    1 	out	(0xA0), A
    00000121 ED A3            [16]    2 	outi
    00000123 3C               [ 4]    3 	inc	A
    00000124 D3 A0            [11]    1 	out	(0xA0), A
    00000126 ED A3            [16]    2 	outi
    00000128 3C               [ 4]    3 	inc	A
    00000129 D3 A0            [11]    1 	out	(0xA0), A
    0000012B ED A3            [16]    2 	outi
    0000012D 3C               [ 4]    3 	inc	A
    0000012E D3 A0            [11]  381 	out	(0xA0), A
    00000130 7E               [ 7]  382 	ld	A, (HL)
    00000131 A7               [ 4]  383 	and	A
    00000132 FAr37r01         [10]  384 	jp	M, PSG_End
    00000135 D3 A1            [11]  385 	out	(0xA1), A
    00000137                        386 	PSG_End:
    00000137 F6 80            [ 7]  387 	or	#0x80
    00000139 77               [ 7]  388 	ld	(HL), A
                                    389 ;C:\Users\reina\OneDrive\Documentos\MSXgl\engine/src/psg.c:403: }
    0000013A C9               [10]  390 	ret
                                    391 	.area _CODE
                                    392 	.area _INITIALIZER
                                    393 	.area _CABS (ABS)
